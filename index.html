<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Book Your Experience</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',system-ui,sans-serif;background:#000;color:#fff;line-height:1.6}
.container{max-width:600px;margin:0 auto;padding:20px}
h1{font-family:'Playfair Display',serif;font-size:2.5em;margin-bottom:10px;letter-spacing:2px}
.subtitle{color:#888;margin-bottom:30px;font-size:0.95em}
.section{background:#111;border:1px solid #333;padding:25px;margin-bottom:20px}
.section-title{font-size:1.1em;margin-bottom:15px;font-weight:600}
label{display:block;margin:15px 0 5px;font-size:0.9em;color:#ccc}
input[type="text"],input[type="tel"],input[type="number"],input[type="url"],select{width:100%;padding:12px;background:#000;border:1px solid #444;color:#fff;font-size:0.95em;outline:none}
input:focus,select:focus{border-color:#fff}
.creator-check{margin:20px 0}
.creator-check input{width:auto;margin-right:8px}
.creator-check label{display:inline;color:#4a9eff;cursor:pointer;font-weight:500}
.platform-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:15px 0}
.platform-card{background:#000;border:1px solid #444;padding:15px;text-align:center;cursor:pointer;transition:all 0.2s}
.platform-card:hover{border-color:#fff}
.platform-card.selected{background:#222;border-color:#4a9eff;color:#4a9eff}
.platform-card span{display:block;font-size:1.2em;margin-bottom:5px}
.cashback-info{background:#1a1a1a;border-left:3px solid #4a9eff;padding:15px;margin:15px 0}
.cashback-info.active{border-color:#0f0}
.price-display{font-size:1.8em;font-weight:700;margin:10px 0}
.original{text-decoration:line-through;color:#666;font-size:0.7em;margin-right:10px}
.savings{color:#0f0;font-size:0.65em}
button{width:100%;padding:15px;background:#fff;color:#000;border:none;font-size:1.1em;font-weight:700;cursor:pointer;margin-top:20px;letter-spacing:1px}
button:hover{background:#ddd}
.hidden{display:none}
.tc-link{text-align:center;margin-top:10px;font-size:0.75em}
.tc-link a{color:#555;text-decoration:none}
.coupon-section{background:#0a0a0a;border:2px solid #333;padding:20px;margin-bottom:25px}
.coupon-input-wrapper{display:flex;gap:10px}
.coupon-input-wrapper input{flex:1}
.coupon-input-wrapper button{width:auto;padding:12px 25px;margin:0}
.discount-msg{margin-top:10px;padding:10px;background:#1a3a1a;color:#0f0;text-align:center;font-weight:600}
.error-msg{background:#3a1a1a;color:#f44}
.handle-input{display:flex;align-items:center;margin-top:8px}
.handle-input span{color:#888;margin-right:5px}
.handle-input input{flex:1}
</style>
</head>
<body>
<div class="container">
<h1>BOOK NOW</h1>
<p class="subtitle">Premium experiences await</p>

<div class="coupon-section">
<div class="section-title">HAVE A COUPON CODE?</div>
<div class="coupon-input-wrapper">
<input type="text" id="couponCode" placeholder="Enter code">
<button onclick="applyCoupon()">APPLY</button>
</div>
<div id="couponMsg" class="hidden"></div>
</div>

<div class="section">
<div class="section-title">BOOKING DETAILS</div>
<label>Full Name *</label>
<input type="text" id="name" required>
<label>Phone Number *</label>
<input type="tel" id="phone" required>
<label>Number of People *</label>
<input type="number" id="numPeople" min="1" value="1">
<label>Service Type *</label>
<select id="serviceType">
<option value="tour">Tour & Travel</option>
<option value="car">Car Rental</option>
<option value="course">Course Purchase</option>
<option value="product">Product Purchase</option>
</select>
</div>

<div class="section">
<div class="section-title">SPECIAL CREATOR OFFER</div>
<p style="color:#888;margin-bottom:15px">Are you a video creator, vlogger, or have good social media presence?</p>
<div class="creator-check">
<input type="checkbox" id="isCreator" onchange="toggleCreator()">
<label for="isCreator">Yes, I'm a content creator</label>
</div>
<div id="creatorSection" class="hidden">
<p style="color:#4a9eff;margin-bottom:15px;font-size:0.9em">‚òÖ Get 5% cashback + earn commission on every sale through your code!</p>
<div class="section-title" style="margin-top:20px">Select Your Platform(s)</div>
<div class="platform-grid">
<div class="platform-card" onclick="togglePlatform(this,'YouTube')"><span>üìπ</span>YouTube</div>
<div class="platform-card" onclick="togglePlatform(this,'Instagram')"><span>üì∑</span>Instagram</div>
<div class="platform-card" onclick="togglePlatform(this,'TikTok')"><span>üéµ</span>TikTok</div>
<div class="platform-card" onclick="togglePlatform(this,'Facebook')"><span>üë•</span>Facebook</div>
<div class="platform-card" onclick="togglePlatform(this,'Twitter')"><span>üê¶</span>Twitter</div>
<div class="platform-card" onclick="togglePlatform(this,'Other')"><span>üåê</span>Other</div>
</div>
<div id="handleInputs"></div>
<div class="cashback-info" id="cashbackInfo">
<strong>HOW IT WORKS:</strong><br>
‚Ä¢ Get 5% cashback after your trip when you upload content<br>
‚Ä¢ Share your unique code with viewers<br>
‚Ä¢ Earn commission on every successful sale<br>
‚Ä¢ Cashback % varies by content type (short/reel vs long vlog)<br>
‚Ä¢ Limited slots available - create urgency!
</div>
<label style="margin-top:15px">
<input type="checkbox" id="acceptCashback" onchange="updatePrice()"> I agree to create content and accept cashback terms
</label>
</div>
</div>

<div class="section">
<div class="section-title">PRICE SUMMARY</div>
<div class="price-display">
<span class="original" id="originalPrice">‚Çπ10,000</span>
<span id="finalPrice">‚Çπ10,000</span>
</div>
<div class="savings" id="savings"></div>
</div>

<button onclick="submitBooking()">COMPLETE BOOKING</button>
<div class="tc-link"><a href="#" onclick="showTC()">Terms & Conditions</a></div>
</div>

<script>
const WEB_APP_URL='https://script.google.com/macros/s/AKfycbz2FBtwYXswBTPtoF5zhpo1QWUtVn4VhZ_r7_duDf4oafOvxG6z5BAxJbfFvzq2MlSaTQ/exec';
let basePrice=10000;
let selectedPlatforms=[];
let couponDiscount=0;
let couponCode='';
let cashbackActive=false;

function toggleCreator(){
const section=document.getElementById('creatorSection');
section.classList.toggle('hidden');
if(!document.getElementById('isCreator').checked){
selectedPlatforms=[];
document.querySelectorAll('.platform-card').forEach(c=>c.classList.remove('selected'));
document.getElementById('handleInputs').innerHTML='';
cashbackActive=false;
}
updatePrice();
}

function togglePlatform(el,platform){
el.classList.toggle('selected');
const idx=selectedPlatforms.indexOf(platform);
if(idx>-1)selectedPlatforms.splice(idx,1);
else selectedPlatforms.push(platform);
renderHandleInputs();
}

function renderHandleInputs(){
const container=document.getElementById('handleInputs');
container.innerHTML='';
selectedPlatforms.forEach(p=>{
const div=document.createElement('div');
div.innerHTML=`<label>${p} Handle</label><div class="handle-input"><span>@</span><input type="text" id="handle_${p}" placeholder="username"></div>`;
container.appendChild(div);
});
}

function updatePrice(){
cashbackActive=document.getElementById('isCreator').checked&&document.getElementById('acceptCashback').checked;
let final=basePrice;
if(couponDiscount>0&&!cashbackActive)final=basePrice*(1-couponDiscount/100);
if(cashbackActive){
const cashback=basePrice*0.05;
document.getElementById('savings').textContent=`You'll receive ‚Çπ${cashback.toFixed(0)} cashback after content upload`;
document.getElementById('cashbackInfo').classList.add('active');
}else{
document.getElementById('savings').textContent=couponDiscount>0?`You saved ‚Çπ${(basePrice*couponDiscount/100).toFixed(0)}!`:'';
document.getElementById('cashbackInfo').classList.remove('active');
}
document.getElementById('finalPrice').textContent='‚Çπ'+final.toFixed(0);
}

function applyCoupon(){
const code=document.getElementById('couponCode').value.trim();
if(!code){alert('Enter a code');return}
const msg=document.getElementById('couponMsg');
fetch(`${WEB_APP_URL}?action=validateCoupon&code=${code}`)
.then(r=>r.json())
.then(d=>{
msg.classList.remove('hidden');
if(d.valid){
couponCode=code;
couponDiscount=d.discount||10;
msg.className='discount-msg';
msg.textContent=`‚úì ${couponDiscount}% discount applied! (Cannot combine with creator cashback)`;
if(document.getElementById('isCreator').checked){
document.getElementById('isCreator').checked=false;
toggleCreator();
}
}else{
msg.className='discount-msg error-msg';
msg.textContent='Invalid or expired code';
couponDiscount=0;
couponCode='';
}
updatePrice();
});
}

function submitBooking(){
const name=document.getElementById('name').value.trim();
const phone=document.getElementById('phone').value.trim();
const numPeople=document.getElementById('numPeople').value;
const serviceType=document.getElementById('serviceType').value;
if(!name||!phone){alert('Fill required fields');return}
const isCreator=document.getElementById('isCreator').checked;
const handles={};
if(isCreator){
selectedPlatforms.forEach(p=>{
const val=document.getElementById(`handle_${p}`).value.trim();
if(val)handles[p]=val;
});
if(Object.keys(handles).length===0){alert('Add at least one social handle');return}
if(!document.getElementById('acceptCashback').checked){alert('Accept cashback terms');return}
}
const data={
action:'submitBooking',
name,phone,numPeople,serviceType,
isCreator,
platforms:selectedPlatforms.join(','),
handles:JSON.stringify(handles),
couponUsed:couponCode,
basePrice,
finalPrice:parseFloat(document.getElementById('finalPrice').textContent.replace('‚Çπ','')),
cashbackEligible:cashbackActive
};
fetch(WEB_APP_URL,{method:'POST',body:JSON.stringify(data)})
.then(r=>r.json())
.then(d=>{
if(d.success){
alert(`Booking confirmed!${d.creatorCode?'\n\nYour Creator Code: '+d.creatorCode+'\n\nShare this with your audience!':''}`);
location.reload();
}else alert('Error: '+d.message);
});
}

function showTC(){
alert('TERMS & CONDITIONS:\n\n‚Ä¢ Cashback given after trip completion and content upload\n‚Ä¢ Cashback % varies: 5% base, higher for quality vlogs\n‚Ä¢ Creator must upload content within 30 days\n‚Ä¢ Commission paid on confirmed sales only\n‚Ä¢ Coupon discount cannot combine with creator cashback\n‚Ä¢ Management reserves right to verify content quality\n‚Ä¢ Limited slots per creator code');
return false;
}
</script>
</body>
</html>